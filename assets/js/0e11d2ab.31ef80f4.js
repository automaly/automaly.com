"use strict";(self.webpackChunkautomaly_com=self.webpackChunkautomaly_com||[]).push([[1074],{96963:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var r=t(85893),i=t(11151);const s={title:"AIF Custom response value in Dynamics AX 2012 R3",description:"AIF Custom response value in Dynamics AX 2012 R3",date:new Date("2017-01-11T00:00:00.000Z"),categories:["AX2012","Integration"],tags:["xpp","aif"]},a=void 0,o={id:"integration/aif-integration-ax12/2017-01-11-aif-custom-response-value-in-dynamics-ax-2012-r3/index",title:"AIF Custom response value in Dynamics AX 2012 R3",description:"AIF Custom response value in Dynamics AX 2012 R3",source:"@site/docs/02-integration/04-aif-integration-ax12/2017-01-11-aif-custom-response-value-in-dynamics-ax-2012-r3/index.md",sourceDirName:"02-integration/04-aif-integration-ax12/2017-01-11-aif-custom-response-value-in-dynamics-ax-2012-r3",slug:"/integration/aif-integration-ax12/2017-01-11-aif-custom-response-value-in-dynamics-ax-2012-r3/",permalink:"/automaly.com/integration/aif-integration-ax12/2017-01-11-aif-custom-response-value-in-dynamics-ax-2012-r3/",draft:!1,unlisted:!1,tags:[{label:"xpp",permalink:"/automaly.com/tags/xpp"},{label:"aif",permalink:"/automaly.com/tags/aif"}],version:"current",frontMatter:{title:"AIF Custom response value in Dynamics AX 2012 R3",description:"AIF Custom response value in Dynamics AX 2012 R3",date:"2017-01-11T00:00:00.000Z",categories:["AX2012","Integration"],tags:["xpp","aif"]},sidebar:"tutorialSidebar",previous:{title:"CRUD Purchase Requisition using AIF in Dynamics AX 2012 R3",permalink:"/automaly.com/integration/aif-integration-ax12/2016-12-29-CRUD-Purchase-Requisition-using-AIF-in-Dynamics-AX-2012-R3/"},next:{title:"Handle AIF error messages in dynamics AX 2012 R3",permalink:"/automaly.com/integration/aif-integration-ax12/2017-01-12-Handle-AIF-error-messages-in-dynamics-AX-2012-R3/"}},l={},d=[{value:"How to do",id:"how-to-do",level:3}];function c(e){const n={a:"a",code:"code",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["For this demonstration, I use AIF service to create Sales order with ",(0,r.jsx)(n.code,{children:"SalesSalesOrderService"})," and I gonna consume AIF using C#.NET."]}),"\n",(0,r.jsxs)(n.p,{children:["Normally, in consume service application we handle return value by using ",(0,r.jsx)(n.code,{children:"EntityKeyList"}),", ",(0,r.jsx)(n.code,{children:"EntityKey"}),", ",(0,r.jsx)(n.code,{children:"KeyData[0].Value"}),". And for Sales Order It will return Created SalesID."]}),"\n",(0,r.jsxs)(n.p,{children:["Let's take a look on ",(0,r.jsx)(n.code,{children:"AxdSalesOrder"})," class. More about ",(0,r.jsx)(n.code,{children:"Axd"})," class please prefer ",(0,r.jsx)(n.a,{href:"https://technet.microsoft.com/en-us/library/aa862063.aspx",children:"this"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Then go to ",(0,r.jsx)(n.code,{children:"createList"})," method, this method will handle response value"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-C#",children:"public AifEntityKeyList createList(\r\n    AifDocumentXml                  _xml,\r\n    AifEndpointActionPolicyInfo     _actionPolicyInfo,\r\n    AifConstraintListCollection     _constraintListCollection)\r\n{\r\n    AifEntityKeyList aifEntityKeyList;\r\n\r\n    aifEntityKeyList = super(_xml, _actionPolicyInfo, _constraintListCollection);\r\n\r\n    // Sales orders are committed - master planning explosion can be executed and confirmed dates be set\r\n    this.postSalesOrderCreation(aifEntityKeyList);\r\n\r\n    return aifEntityKeyList;\r\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["So, how about customer wants another meaning value beside ",(0,r.jsx)(n.code,{children:"SalesID"})," likes ",(0,r.jsx)(n.code,{children:"InventTransId"})," information in ",(0,r.jsx)(n.code,{children:"SalesLine"})," table or another tables base on your requirement. To do that, we need to customize this method."]}),"\n",(0,r.jsx)(n.h3,{id:"how-to-do",children:"How to do"}),"\n",(0,r.jsxs)(n.p,{children:["I will use ",(0,r.jsx)(n.code,{children:"Map"})," and ",(0,r.jsx)(n.code,{children:"MapEnumerator"})," classes (Please refer MSDN to understand these class), this is steps:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["We get the ",(0,r.jsx)(n.code,{children:"SalesId"})," from the original ",(0,r.jsx)(n.code,{children:"entityKeyList"})," and add into ",(0,r.jsx)(n.code,{children:"Map"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["add ",(0,r.jsx)(n.code,{children:"Map"})," to ",(0,r.jsx)(n.code,{children:"MapEnumerator"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"SalesId"})," to find the sales line. (",(0,r.jsx)(n.code,{children:"mapEnumerator.currentValue()"})," can get current ",(0,r.jsx)(n.code,{children:"SalesID"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Create a new ",(0,r.jsx)(n.code,{children:"entityKey"})," and insert the sales line information to this ",(0,r.jsx)(n.code,{children:"entityKey"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["add back ",(0,r.jsx)(n.code,{children:"entityKey"})," to ",(0,r.jsx)(n.code,{children:"entityKeyList"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["From here in ",(0,r.jsx)(n.code,{children:"entityKeyList"})," will store information of ",(0,r.jsx)(n.code,{children:"SalesID"})," and List fields of ",(0,r.jsx)(n.code,{children:"SalesLine"})," table."]}),"\n",(0,r.jsxs)(n.p,{children:["Here is the code for ",(0,r.jsx)(n.code,{children:"createList"})," method, beside ",(0,r.jsx)(n.code,{children:"SalesId"})," I will try to get ",(0,r.jsx)(n.code,{children:"InventTransId"})," in ",(0,r.jsx)(n.code,{children:"SalesLine"})," Table"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-C#",children:"\r\npublic AifEntityKeyList createList(\r\n    AifDocumentXml                  _xml,\r\n    AifEndpointActionPolicyInfo     _actionPolicyInfo,\r\n    AifConstraintListCollection     _constraintListCollection)\r\n{\r\n    AifEntityKeyList aifEntityKeyList;\r\n    \r\n    SalesId                         salesId;\r\n    SalesLine                       salesLine;\r\n    AifEntityKey                    entityKey;\r\n    AifEntityKey                    salesEntityKey;\r\n    Map                             keyDataMap;\r\n    Map                             salesOrderMap;\r\n    MapEnumerator                   mapEnumerator;\r\n\r\n    aifEntityKeyList = super(_xml, _actionPolicyInfo, _constraintListCollection);\r\n\r\n    // Sales orders are committed - master planning explosion can be executed and confirmed dates be set\r\n    this.postSalesOrderCreation(aifEntityKeyList);\r\n\r\n    entityKey       = aifEntityKeyList.getEntityKey(1);\r\n    keyDataMap      = entityKey.parmKeyDataMap();\r\n    mapEnumerator   = keyDataMap.getEnumerator();\r\n    while (mapEnumerator.moveNext())\r\n    {\r\n        salesId = mapEnumerator.currentValue();\r\n        if (salesId)\r\n        {\r\n            while select InventTransId, RecId from salesLine\r\n                where salesLine.SalesId == salesId\r\n            {\r\n                salesEntityKey = new AifEntityKey();\r\n                salesOrderMap  = new Map(Types::Integer, Types::Container);\r\n                salesEntityKey.parmTableId(tableNum(SalesLine));\r\n                salesEntityKey.parmRecId(salesLine.RecId);\r\n                salesOrderMap.insert(fieldNum(SalesLine, InventTransId), [salesLine.InventTransId]);\r\n                salesEntityKey.parmKeyDataMap(salesOrderMap);\r\n                aifEntityKeyList.addEntityKey(salesEntityKey);\r\n            }\r\n        }\r\n    }\r\n\r\n    return aifEntityKeyList;\r\n}\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"Code in C#.NET to get list key"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-C#",children:'\r\nSalesOrderServiceClient client = new SalesOrderServiceClient();\r\ntry\r\n{\r\n\tEntityKey[] salesOrderCreatedEntity = client.create(callContext, salesOrder);\r\n\t//EntityKey salesOrderCreated = (EntityKey)salesOrderCreatedEntity.GetValue(0);\r\n\r\n\tSystem.Collections.IEnumerator enumerator = salesOrderCreatedEntity.GetEnumerator();\r\n\r\n\twhile (enumerator.MoveNext())\r\n\t{\r\n\t\tEntityKey salesOrderCreated = (EntityKey)enumerator.Current;\r\n\t\tConsole.WriteLine(salesOrderCreated.KeyData[0].Field);\r\n\t\tConsole.WriteLine(salesOrderCreated.KeyData[0].Value);\r\n\t}\r\n\t//Console.WriteLine("The sales order created has a Sales ID of " + salesOrderCreated.KeyData[0].Value);\r\n\tConsole.ReadLine();\r\n}\r\ncatch (Exception e)\r\n{\r\n\tConsole.WriteLine(e.ToString());\r\n\tConsole.ReadLine();\r\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"Output:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"AIF-Custom-response-value-in-Dynamics-AX-2012",src:t(81183).Z+"",width:"269",height:"161"})}),"\n",(0,r.jsx)(n.p,{children:"Thank you for reading."})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},81183:(e,n,t)=>{t.d(n,{Z:()=>r});const r="data:image/png;base64,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"},11151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>a});var r=t(67294);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);