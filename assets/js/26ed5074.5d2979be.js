"use strict";(self.webpackChunkautomaly_com=self.webpackChunkautomaly_com||[]).push([[209],{54532:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});var t=n(85893),i=n(11151);const c={title:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",description:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",date:new Date("2016-12-28T00:00:00.000Z"),tags:["AX2012","Integration"],categories:["AX2012","Integration","AIF"],lightgallery:!0,toc:{auto:!0}},a=void 0,s={id:"integration/aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/index",title:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",description:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",source:"@site/docs/02-integration/04-aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/index.md",sourceDirName:"02-integration/04-aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",slug:"/integration/aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/",permalink:"/integration/aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/",draft:!1,unlisted:!1,tags:[{label:"AX2012",permalink:"/tags/ax-2012"},{label:"Integration",permalink:"/tags/integration"}],version:"current",lastUpdatedBy:"Luan Nguyen",lastUpdatedAt:1701636614e3,frontMatter:{title:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",description:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",date:"2016-12-28T00:00:00.000Z",tags:["AX2012","Integration"],categories:["AX2012","Integration","AIF"],lightgallery:!0,toc:{auto:!0}},sidebar:"tutorialSidebar",previous:{title:"CRUD Items, products, products master dimension, variants using AIF in Dynamics AX 2012 R3",permalink:"/integration/aif-integration-ax12/2016-12-27-CRUD-Items,-products-using-AIF-in-Dynamics-AX-2012-R3/"},next:{title:"Insert, update, Delete order line through AIF In AX 2012 R3",permalink:"/integration/aif-integration-ax12/2016-12-28-Insert,-update,-Delete-order-line-through-AIF-In-AX-2012-R3/"}},d={},o=[{value:"1. Create Query",id:"1-create-query",level:2},{value:"2. Using AIF Wizards",id:"2-using-aif-wizards",level:2},{value:"3. Create Service operation and <code>AxBC class</code>",id:"3-create-service-operation-and-axbc-class",level:2},{value:"4. Deploy and create service",id:"4-deploy-and-create-service",level:2},{value:"5. Consume service using C#.NET",id:"5-consume-service-using-cnet",level:2},{value:"<code>Code for create purchase order</code>",id:"code-for-create-purchase-order",level:3},{value:"<code>Code for read purchase order </code>",id:"code-for-read-purchase-order-",level:3},{value:"<code>Code for update purchase order </code>",id:"code-for-update-purchase-order-",level:3},{value:"<code>Code for delete purchase order </code>",id:"code-for-delete-purchase-order-",level:3}];function l(e){const r={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#1-create-query",children:"1. Create Query"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#2-using-aif-wizards",children:"2. Using AIF Wizards"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsxs)(r.a,{href:"#3-create-service-operation-and-axbc-class",children:["3. Create Service operation and ",(0,t.jsx)(r.code,{children:"AxBC class"})]})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#4-deploy-and-create-service",children:"4. Deploy and create service"})}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"#5-consume-service-using-cnet",children:"5. Consume service using C#.NET"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#code-for-read-purchase-order-",children:(0,t.jsx)(r.code,{children:"Code for read purchase order "})})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#code-for-update-purchase-order-",children:(0,t.jsx)(r.code,{children:"Code for update purchase order "})})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#code-for-delete-purchase-order-",children:(0,t.jsx)(r.code,{children:"Code for delete purchase order "})})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Due to Purchase order doesn\u2019t have Standard document service so we have to create new Document service for that using AIF wizards."}),"\n",(0,t.jsxs)(r.p,{children:["We can use the AIF document service with ",(0,t.jsx)(r.code,{children:"NETTCP"})," or ",(0,t.jsx)(r.code,{children:"HTTP"})," Adapter to Create Purchase order service, here is steps"]}),"\n",(0,t.jsx)(r.h2,{id:"1-create-query",children:"1. Create Query"}),"\n",(0,t.jsxs)(r.p,{children:["with three ",(0,t.jsx)(r.strong,{children:"datasouce"})," (",(0,t.jsx)(r.code,{children:"PurchTable, PurchLine, InventDim"}),") likes below"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:n(4866).Z+"",width:"453",height:"378"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"As best practice for Document service, name of query should be start with Axd* prefix."}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"2-using-aif-wizards",children:"2. Using AIF Wizards"}),"\n",(0,t.jsxs)(r.p,{children:["In AX development environment, go to ",(0,t.jsx)(r.code,{children:"Tools > Wizards > AIF document service wizards"})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:n(94772).Z+"",width:"625",height:"511"})}),"\n",(0,t.jsxs)(r.p,{children:["Choose recent created query and click ",(0,t.jsx)(r.strong,{children:"next"}),"."]}),"\n",(0,t.jsxs)(r.h2,{id:"3-create-service-operation-and-axbc-class",children:["3. Create Service operation and ",(0,t.jsx)(r.code,{children:"AxBC class"})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:n(44981).Z+"",width:"625",height:"509"})}),"\n",(0,t.jsxs)(r.p,{children:["Click ",(0,t.jsx)(r.code,{children:"next"})," and then ",(0,t.jsx)(r.code,{children:"Generate"}),"."]}),"\n",(0,t.jsxs)(r.p,{children:["You will get service project in ",(0,t.jsx)(r.strong,{children:"Private"})," project"]}),"\n",(0,t.jsx)(r.h2,{id:"4-deploy-and-create-service",children:"4. Deploy and create service"}),"\n",(0,t.jsxs)(r.p,{children:["\u2022\tRight click on ",(0,t.jsx)(r.code,{children:"PurchOrderService"})," > Add-Ins > Register service"]}),"\n",(0,t.jsx)(r.p,{children:"\u2022\tSystem administration > Setup > Services and AIF > Inbound ports"}),"\n",(0,t.jsxs)(r.p,{children:["\u2022\tClick ",(0,t.jsx)(r.code,{children:"New"})," on ",(0,t.jsx)(r.code,{children:"Inbound ports form"})," and name the Service."]}),"\n",(0,t.jsx)(r.p,{children:"\u2022\tAdapter: NETTCP (it also works with HTTP adapter)"}),"\n",(0,t.jsxs)(r.p,{children:["\u2022\tIn ",(0,t.jsx)(r.em,{children:"Service contract customizations"})," fast tab click ",(0,t.jsx)(r.code,{children:"Service operations"})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:n(47266).Z+"",width:"643",height:"228"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"Active"})," recent created Service"]}),"\n",(0,t.jsx)(r.h2,{id:"5-consume-service-using-cnet",children:"5. Consume service using C#.NET"}),"\n",(0,t.jsxs)(r.p,{children:["After service is activated, you can get ",(0,t.jsx)(r.strong,{children:"WSDL URI"})," likes"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:" http://servername:port/DynamicsAx/Services/PurchaseOrder"})}),"\n",(0,t.jsxs)(r.p,{children:["Create console project and Add Service References, the code below\r\n",(0,t.jsx)(r.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:n(91491).Z+"",width:"523",height:"481"})]}),"\n",(0,t.jsxs)(r.p,{children:["In Class, I will write method to return list of ",(0,t.jsx)(r.code,{children:"EnityKey"})," PurchId"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-C#",children:'private static EntityKey[] EntityForPurchId(string purchId)\r\n{\r\n\tKeyField field = new KeyField()\r\n\t{\r\n\t\tField = "PurchId",\r\n\t\tValue = purchId\r\n\t};\r\n\r\n\tEntityKey key = new EntityKey()\r\n\t{\r\n\t\tKeyData = new[] { field }\r\n\t};\r\n\r\n\treturn new[] { key };\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"code-for-create-purchase-order",children:(0,t.jsx)(r.code,{children:"Code for create purchase order"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-C#",children:'var dim = new AxdEntity_InventDim()\r\n{\r\n\tInventSiteId = "DN",\r\n\tInventLocationId = "F10-S120",\r\n\tInventBatchId = "BATCH001"\r\n};\r\n\r\nvar purchLine = new AxdEntity_PurchLine()\r\n{\r\n\tItemId = "220067",\r\n\tPurchQty = 15,\r\n\tPurchUnit=  "ea",\r\n\r\n\tInventDim = new AxdEntity_InventDim[] { dim }\r\n};\r\n\r\n\r\nvar purchTable = new AxdEntity_PurchTable()\r\n{\r\n\tOrderAccount = "101-01-75441",\r\n\tLanguageId = "en-us",\r\n\tCurrencyCode = "KRW",\r\n\tPurchName = "AIF PO Test",\r\n\tPurchLine = new AxdEntity_PurchLine[] { purchLine }\r\n\r\n};\r\n\r\nAxdMav_PurchOrderService purchOrder = new AxdMav_PurchOrderService();\r\n\r\npurchOrder.PurchTable = new AxdEntity_PurchTable[] { purchTable };\r\n\r\nCallContext callContext = new CallContext\r\n{\r\n\tCompany = "bgr",\r\n\tLanguage = "en-us"\r\n};\r\n\r\nMav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\r\n\r\ntry\r\n{\r\n\tEntityKey[] purchOrderCreatedEntity = client.create(callContext, purchOrder);\r\n\tEntityKey purchOrderCreated = (EntityKey)purchOrderCreatedEntity.GetValue(0);\r\n\r\n\tConsole.WriteLine("The purch order created has a Purch ID of " + purchOrderCreated.KeyData[0].Value);\r\n\tConsole.ReadLine();\r\n}\r\ncatch (Exception e)\r\n{\r\n\tConsole.WriteLine(e.ToString());\r\n\tConsole.ReadLine();\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"code-for-read-purchase-order-",children:(0,t.jsx)(r.code,{children:"Code for read purchase order "})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-C#",children:'EntityKey[] entityKeyList = EntityForPurchId("BGR-000054");\r\n\r\nCallContext callContext      = new CallContext();\r\ncallContext.Company          = "bgr";\r\nMav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\r\n\r\nAxdMav_PurchOrderService purchOrders = client.read(callContext, entityKeyList);\r\nAxdEntity_PurchTable[] purchTables = purchOrders.PurchTable;\r\nAxdEntity_PurchTable    purchTable = purchTables[0];\r\nAxdEntity_PurchLine purchLine = purchTable.PurchLine[0];\r\n\r\nConsole.WriteLine("Purch Name: " + purchTable.PurchName);            \r\nConsole.WriteLine("Order Account: " + purchTable.OrderAccount);\r\nConsole.WriteLine("Language Id: " + purchTable.LanguageId);\r\nConsole.WriteLine("Qty: " + purchLine.PurchQty);\r\nConsole.WriteLine("Item Id: " + purchLine.ItemId);\r\n\r\nclient.Close();\r\nConsole.ReadLine();\r\n\t\t\t\n'})}),"\n",(0,t.jsx)(r.h3,{id:"code-for-update-purchase-order-",children:(0,t.jsx)(r.code,{children:"Code for update purchase order "})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-C#",children:'Mav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\r\nCallContext callContext = new CallContext();\r\ncallContext.Company = "bgr";\r\n\r\nEntityKey[] entityKeyList = EntityForPurchId("BGR-000078");\r\nAxdMav_PurchOrderService purchOrders = client.read(callContext, entityKeyList);\r\n\r\n//salesOrders.GetHashCode();\r\nAxdEntity_PurchTable[] purchTables = purchOrders.PurchTable;\r\nAxdEntity_PurchTable purchTable = new AxdEntity_PurchTable();\r\npurchTable = purchTables.First();\r\n\r\n//salesTable.GetHashCode();\r\nAxdEntity_PurchLine purchLine = new AxdEntity_PurchLine();\r\npurchLine = purchTable.PurchLine.First();\r\n\r\ndecimal purchQty = 20;\r\npurchLine.PurchQty = purchQty;\r\n\r\ntry\r\n{\r\n\tclient.update(callContext, entityKeyList, purchOrders);\r\n\tEntityKey purchOrdersUpdated = (EntityKey)entityKeyList.GetValue(0);\r\n\tConsole.WriteLine("The purchase order has been updated has a Purch ID of " + purchOrdersUpdated.KeyData[0].Value + " with Qty " + purchQty.ToString() + "");\r\n\tConsole.ReadLine();\r\n}\r\ncatch (Exception ex)\r\n{\r\n\tConsole.WriteLine(ex.ToString());\r\n\tConsole.ReadLine();\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"code-for-delete-purchase-order-",children:(0,t.jsx)(r.code,{children:"Code for delete purchase order "})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-C#",children:'Mav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\r\nCallContext callContext = new CallContext();\r\ncallContext.Company = "bgr";\r\n\r\nEntityKey[] entityKeyList = EntityForPurchId("BGR-000054");\r\ntry\r\n{\r\n\tclient.delete(callContext, entityKeyList);\r\n\tEntityKey purchOrdersDeleted = (EntityKey)entityKeyList.GetValue(0);\r\n\tConsole.WriteLine("The purch order has been deleted has a purch ID of " + purchOrdersDeleted.KeyData[0].Value);\r\n\tConsole.ReadLine();\r\n}\r\ncatch (Exception ex)\r\n{\r\n\tConsole.WriteLine(ex.ToString());\r\n\tConsole.ReadLine();\r\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"Thank you for reading!"})]})}function h(e={}){const{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},4866:(e,r,n)=>{n.d(r,{Z:()=>t});const t=n.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-01-8a456586503e5ac6e06497dc1c2c5098.png"},94772:(e,r,n)=>{n.d(r,{Z:()=>t});const t=n.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-02-4c33d8c41ea7d9138fa33357c27e6232.png"},44981:(e,r,n)=>{n.d(r,{Z:()=>t});const t=n.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-03-69f206a9c9cf8c62e0a4f917bca6964e.png"},91491:(e,r,n)=>{n.d(r,{Z:()=>t});const t=n.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-05-cfa420b0b4eb8506060d0020900176a5.png"},47266:(e,r,n)=>{n.d(r,{Z:()=>t});const t=n.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-4-9c4c38cea8f566657cd00ba4b1ad2732.png"},11151:(e,r,n)=>{n.d(r,{Z:()=>s,a:()=>a});var t=n(67294);const i={},c=t.createContext(i);function a(e){const r=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(c.Provider,{value:r},e.children)}}}]);