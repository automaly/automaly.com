"use strict";(self.webpackChunknuxulutest=self.webpackChunknuxulutest||[]).push([[3450],{63923:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>o});var t=r(74848),i=r(28453);const c={title:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",description:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",date:new Date("2016-12-28T00:00:00.000Z"),tags:["AX2012","Integration"],categories:["AX2012","Integration","AIF"],lightgallery:!0,toc:{auto:!0}},s=void 0,a={id:"integration/aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/index",title:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",description:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",source:"@site/docs/02-integration/04-aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/index.md",sourceDirName:"02-integration/04-aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",slug:"/integration/aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/",permalink:"/docs/integration/aif-integration-ax12/2016-12-28-CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3/",draft:!1,unlisted:!1,tags:[{inline:!0,label:"AX2012",permalink:"/docs/tags/ax-2012"},{inline:!0,label:"Integration",permalink:"/docs/tags/integration"}],version:"current",lastUpdatedBy:"Max Nguyen",lastUpdatedAt:1726374706e3,frontMatter:{title:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",description:"CRUD Purchase order using AIF in Dynamics AX 2012 R3",date:"2016-12-28T00:00:00.000Z",tags:["AX2012","Integration"],categories:["AX2012","Integration","AIF"],lightgallery:!0,toc:{auto:!0}},sidebar:"tutorialSidebar",previous:{title:"CRUD Items, products, products master dimension, variants using AIF in Dynamics AX 2012 R3",permalink:"/docs/integration/aif-integration-ax12/2016-12-27-CRUD-Items,-products-using-AIF-in-Dynamics-AX-2012-R3/"},next:{title:"Insert, update, Delete order line through AIF In AX 2012 R3",permalink:"/docs/integration/aif-integration-ax12/2016-12-28-Insert,-update,-Delete-order-line-through-AIF-In-AX-2012-R3/"}},d={},o=[{value:"1. Create Query",id:"1-create-query",level:2},{value:"2. Using AIF Wizards",id:"2-using-aif-wizards",level:2},{value:"3. Create Service operation and <code>AxBC class</code>",id:"3-create-service-operation-and-axbc-class",level:2},{value:"4. Deploy and create service",id:"4-deploy-and-create-service",level:2},{value:"5. Consume service using C#.NET",id:"5-consume-service-using-cnet",level:2},{value:"<code>Code for create purchase order</code>",id:"code-for-create-purchase-order",level:3},{value:"<code>Code for read purchase order </code>",id:"code-for-read-purchase-order-",level:3},{value:"<code>Code for update purchase order </code>",id:"code-for-update-purchase-order-",level:3},{value:"<code>Code for delete purchase order </code>",id:"code-for-delete-purchase-order-",level:3}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#1-create-query",children:"1. Create Query"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#2-using-aif-wizards",children:"2. Using AIF Wizards"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"#3-create-service-operation-and-axbc-class",children:["3. Create Service operation and ",(0,t.jsx)(n.code,{children:"AxBC class"})]})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#4-deploy-and-create-service",children:"4. Deploy and create service"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#5-consume-service-using-cnet",children:"5. Consume service using C#.NET"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#code-for-read-purchase-order-",children:(0,t.jsx)(n.code,{children:"Code for read purchase order "})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#code-for-update-purchase-order-",children:(0,t.jsx)(n.code,{children:"Code for update purchase order "})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#code-for-delete-purchase-order-",children:(0,t.jsx)(n.code,{children:"Code for delete purchase order "})})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Due to Purchase order doesn\u2019t have Standard document service so we have to create new Document service for that using AIF wizards."}),"\n",(0,t.jsxs)(n.p,{children:["We can use the AIF document service with ",(0,t.jsx)(n.code,{children:"NETTCP"})," or ",(0,t.jsx)(n.code,{children:"HTTP"})," Adapter to Create Purchase order service, here is steps"]}),"\n",(0,t.jsx)(n.h2,{id:"1-create-query",children:"1. Create Query"}),"\n",(0,t.jsxs)(n.p,{children:["with three ",(0,t.jsx)(n.strong,{children:"datasouce"})," (",(0,t.jsx)(n.code,{children:"PurchTable, PurchLine, InventDim"}),") likes below"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:r(35168).A+"",width:"453",height:"378"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"As best practice for Document service, name of query should be start with Axd* prefix."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"2-using-aif-wizards",children:"2. Using AIF Wizards"}),"\n",(0,t.jsxs)(n.p,{children:["In AX development environment, go to ",(0,t.jsx)(n.code,{children:"Tools > Wizards > AIF document service wizards"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:r(32731).A+"",width:"625",height:"511"})}),"\n",(0,t.jsxs)(n.p,{children:["Choose recent created query and click ",(0,t.jsx)(n.strong,{children:"next"}),"."]}),"\n",(0,t.jsxs)(n.h2,{id:"3-create-service-operation-and-axbc-class",children:["3. Create Service operation and ",(0,t.jsx)(n.code,{children:"AxBC class"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:r(11186).A+"",width:"625",height:"509"})}),"\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.code,{children:"next"})," and then ",(0,t.jsx)(n.code,{children:"Generate"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["You will get service project in ",(0,t.jsx)(n.strong,{children:"Private"})," project"]}),"\n",(0,t.jsx)(n.h2,{id:"4-deploy-and-create-service",children:"4. Deploy and create service"}),"\n",(0,t.jsxs)(n.p,{children:["\u2022\tRight click on ",(0,t.jsx)(n.code,{children:"PurchOrderService"})," > Add-Ins > Register service"]}),"\n",(0,t.jsx)(n.p,{children:"\u2022\tSystem administration > Setup > Services and AIF > Inbound ports"}),"\n",(0,t.jsxs)(n.p,{children:["\u2022\tClick ",(0,t.jsx)(n.code,{children:"New"})," on ",(0,t.jsx)(n.code,{children:"Inbound ports form"})," and name the Service."]}),"\n",(0,t.jsx)(n.p,{children:"\u2022\tAdapter: NETTCP (it also works with HTTP adapter)"}),"\n",(0,t.jsxs)(n.p,{children:["\u2022\tIn ",(0,t.jsx)(n.em,{children:"Service contract customizations"})," fast tab click ",(0,t.jsx)(n.code,{children:"Service operations"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:r(95257).A+"",width:"643",height:"228"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Active"})," recent created Service"]}),"\n",(0,t.jsx)(n.h2,{id:"5-consume-service-using-cnet",children:"5. Consume service using C#.NET"}),"\n",(0,t.jsxs)(n.p,{children:["After service is activated, you can get ",(0,t.jsx)(n.strong,{children:"WSDL URI"})," likes"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:" http://servername:port/DynamicsAx/Services/PurchaseOrder"})}),"\n",(0,t.jsxs)(n.p,{children:["Create console project and Add Service References, the code below\n",(0,t.jsx)(n.img,{alt:"CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3",src:r(77924).A+"",width:"523",height:"481"})]}),"\n",(0,t.jsxs)(n.p,{children:["In Class, I will write method to return list of ",(0,t.jsx)(n.code,{children:"EnityKey"})," PurchId"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-C#",children:'private static EntityKey[] EntityForPurchId(string purchId)\n{\n\tKeyField field = new KeyField()\n\t{\n\t\tField = "PurchId",\n\t\tValue = purchId\n\t};\n\n\tEntityKey key = new EntityKey()\n\t{\n\t\tKeyData = new[] { field }\n\t};\n\n\treturn new[] { key };\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"code-for-create-purchase-order",children:(0,t.jsx)(n.code,{children:"Code for create purchase order"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-C#",children:'var dim = new AxdEntity_InventDim()\n{\n\tInventSiteId = "DN",\n\tInventLocationId = "F10-S120",\n\tInventBatchId = "BATCH001"\n};\n\nvar purchLine = new AxdEntity_PurchLine()\n{\n\tItemId = "220067",\n\tPurchQty = 15,\n\tPurchUnit=  "ea",\n\n\tInventDim = new AxdEntity_InventDim[] { dim }\n};\n\n\nvar purchTable = new AxdEntity_PurchTable()\n{\n\tOrderAccount = "101-01-75441",\n\tLanguageId = "en-us",\n\tCurrencyCode = "KRW",\n\tPurchName = "AIF PO Test",\n\tPurchLine = new AxdEntity_PurchLine[] { purchLine }\n\n};\n\nAxdMav_PurchOrderService purchOrder = new AxdMav_PurchOrderService();\n\npurchOrder.PurchTable = new AxdEntity_PurchTable[] { purchTable };\n\nCallContext callContext = new CallContext\n{\n\tCompany = "bgr",\n\tLanguage = "en-us"\n};\n\nMav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\n\ntry\n{\n\tEntityKey[] purchOrderCreatedEntity = client.create(callContext, purchOrder);\n\tEntityKey purchOrderCreated = (EntityKey)purchOrderCreatedEntity.GetValue(0);\n\n\tConsole.WriteLine("The purch order created has a Purch ID of " + purchOrderCreated.KeyData[0].Value);\n\tConsole.ReadLine();\n}\ncatch (Exception e)\n{\n\tConsole.WriteLine(e.ToString());\n\tConsole.ReadLine();\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"code-for-read-purchase-order-",children:(0,t.jsx)(n.code,{children:"Code for read purchase order "})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-C#",children:'EntityKey[] entityKeyList = EntityForPurchId("BGR-000054");\n\nCallContext callContext      = new CallContext();\ncallContext.Company          = "bgr";\nMav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\n\nAxdMav_PurchOrderService purchOrders = client.read(callContext, entityKeyList);\nAxdEntity_PurchTable[] purchTables = purchOrders.PurchTable;\nAxdEntity_PurchTable    purchTable = purchTables[0];\nAxdEntity_PurchLine purchLine = purchTable.PurchLine[0];\n\nConsole.WriteLine("Purch Name: " + purchTable.PurchName);            \nConsole.WriteLine("Order Account: " + purchTable.OrderAccount);\nConsole.WriteLine("Language Id: " + purchTable.LanguageId);\nConsole.WriteLine("Qty: " + purchLine.PurchQty);\nConsole.WriteLine("Item Id: " + purchLine.ItemId);\n\nclient.Close();\nConsole.ReadLine();\n\t\t\t\n'})}),"\n",(0,t.jsx)(n.h3,{id:"code-for-update-purchase-order-",children:(0,t.jsx)(n.code,{children:"Code for update purchase order "})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-C#",children:'Mav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\nCallContext callContext = new CallContext();\ncallContext.Company = "bgr";\n\nEntityKey[] entityKeyList = EntityForPurchId("BGR-000078");\nAxdMav_PurchOrderService purchOrders = client.read(callContext, entityKeyList);\n\n//salesOrders.GetHashCode();\nAxdEntity_PurchTable[] purchTables = purchOrders.PurchTable;\nAxdEntity_PurchTable purchTable = new AxdEntity_PurchTable();\npurchTable = purchTables.First();\n\n//salesTable.GetHashCode();\nAxdEntity_PurchLine purchLine = new AxdEntity_PurchLine();\npurchLine = purchTable.PurchLine.First();\n\ndecimal purchQty = 20;\npurchLine.PurchQty = purchQty;\n\ntry\n{\n\tclient.update(callContext, entityKeyList, purchOrders);\n\tEntityKey purchOrdersUpdated = (EntityKey)entityKeyList.GetValue(0);\n\tConsole.WriteLine("The purchase order has been updated has a Purch ID of " + purchOrdersUpdated.KeyData[0].Value + " with Qty " + purchQty.ToString() + "");\n\tConsole.ReadLine();\n}\ncatch (Exception ex)\n{\n\tConsole.WriteLine(ex.ToString());\n\tConsole.ReadLine();\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"code-for-delete-purchase-order-",children:(0,t.jsx)(n.code,{children:"Code for delete purchase order "})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-C#",children:'Mav_PurchOrderServiceServiceClient client = new Mav_PurchOrderServiceServiceClient();\nCallContext callContext = new CallContext();\ncallContext.Company = "bgr";\n\nEntityKey[] entityKeyList = EntityForPurchId("BGR-000054");\ntry\n{\n\tclient.delete(callContext, entityKeyList);\n\tEntityKey purchOrdersDeleted = (EntityKey)entityKeyList.GetValue(0);\n\tConsole.WriteLine("The purch order has been deleted has a purch ID of " + purchOrdersDeleted.KeyData[0].Value);\n\tConsole.ReadLine();\n}\ncatch (Exception ex)\n{\n\tConsole.WriteLine(ex.ToString());\n\tConsole.ReadLine();\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Thank you for reading!"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},35168:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-01-8a456586503e5ac6e06497dc1c2c5098.png"},32731:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-02-4c33d8c41ea7d9138fa33357c27e6232.png"},11186:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-03-69f206a9c9cf8c62e0a4f917bca6964e.png"},77924:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-05-cfa420b0b4eb8506060d0020900176a5.png"},95257:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/CRUD-Purchase-order-using-AIF-in-Dynamics-AX-2012-R3-4-9c4c38cea8f566657cd00ba4b1ad2732.png"},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var t=r(96540);const i={},c=t.createContext(i);function s(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);